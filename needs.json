{"created": "2025-10-19T01:17:10.471337", "current_version": "", "project": "ESP32 Template", "versions": {"": {"created": "2025-10-19T01:17:10.471323", "creator": {"program": "sphinx_needs", "version": "6.0.1"}, "needs": {"REQ_CFG_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL consolidate all user-configurable parameters into a centralized configuration module, using appropriate data types for embedded performance optimization.\n\n**Rationale:** Centralized configuration simplifies maintenance, reduces code duplication, and enables runtime configuration changes.\n\n**Acceptance Criteria:**\n\n- AC-1: All configurable parameters SHALL be defined in configuration module\n- AC-2: Configuration SHALL use appropriate data types (integers, enums, etc.)\n- AC-3: Hardware-specific constants SHALL remain in component headers\n- AC-4: Configuration SHALL be accessible from all application modules", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 15, "links": ["REQ_SYS_CFG_1"], "links_back": ["REQ_CFG_2", "REQ_CFG_3", "REQ_CFG_9", "SPEC_CFG_ARCH_1", "SPEC_CFG_IMPL_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Static Configuration Management", "sections": ["Static Configuration Management", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "architecture"], "template": null, "title": "Centralized Configuration Header", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_10": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL gracefully handle NVS read/write failures and continue operating with default configuration.\n\n**Rationale:** NVS corruption or flash wear-out should not prevent system boot.\n\n**Acceptance Criteria:**\n\n- AC-1: NVS read failure SHALL log error and use default configuration\n- AC-2: NVS write failure SHALL log error and continue operation\n- AC-3: System SHALL boot successfully even if NVS is corrupted\n- AC-4: Web interface SHALL indicate NVS errors to user", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_10", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 197, "links": ["REQ_CFG_4"], "links_back": ["SPEC_CFG_ERROR_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Configuration Error Handling", "sections": ["Configuration Error Handling", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "error-handling"], "template": null, "title": "NVS Error Recovery", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_11": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The configuration manager SHOULD log all configuration changes for debugging and audit purposes.\n\n**Rationale:** Configuration change history aids debugging and security auditing.\n\n**Acceptance Criteria:**\n\n- AC-1: Log SHALL include timestamp, parameter name, old value, new value\n- AC-2: Log SHALL use appropriate log level (INFO for changes, ERROR for failures)\n- AC-3: Log SHALL be readable via serial console\n- AC-4: Log format SHALL be parseable for automated analysis", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_11", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 216, "links": ["REQ_CFG_5", "REQ_CFG_8"], "links_back": ["SPEC_CFG_LOGGING_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "optional", "query": "", "rationale": "", "section_name": "Configuration Error Handling", "sections": ["Configuration Error Handling", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "logging", "debugging"], "template": null, "title": "Configuration Logging", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_2": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** All application components SHALL access configuration parameters through the centralized configuration module rather than defining local constants.\n\n**Rationale:** Ensures single source of truth for configuration values and enables runtime reconfiguration.\n\n**Acceptance Criteria:**\n\n- AC-1: Components SHALL include configuration module header\n- AC-2: Components SHALL NOT define duplicate configuration constants\n- AC-3: Configuration access SHALL be type-safe\n- AC-4: Invalid configuration access SHALL be detected at compile time", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_2", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 34, "links": ["REQ_CFG_1"], "links_back": ["SPEC_CFG_ARCH_1", "SPEC_CFG_IMPL_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Static Configuration Management", "sections": ["Static Configuration Management", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "api"], "template": null, "title": "Compile-Time Configuration Access", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_3": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL maintain a runtime-modifiable configuration structure that mirrors compile-time default values.\n\n**Rationale:** Enables users to modify configuration at runtime without firmware recompilation.\n\n**Acceptance Criteria:**\n\n- AC-1: Runtime configuration structure SHALL contain all user-configurable parameters\n- AC-2: Runtime configuration SHALL be initialized with compile-time defaults on boot\n- AC-3: Runtime configuration SHALL use same data types as compile-time constants\n- AC-4: Configuration structure SHALL be memory-efficient for embedded constraints", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_3", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 56, "links": ["REQ_CFG_1", "REQ_SYS_CFG_1"], "links_back": ["REQ_CFG_4", "REQ_CFG_6", "REQ_WEB_2", "SPEC_CFG_FLOW_1", "SPEC_CFG_STORAGE_1", "SPEC_CFG_RUNTIME_1", "SPEC_CFG_IMPL_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Runtime Configuration Management", "sections": ["Runtime Configuration Management", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "runtime"], "template": null, "title": "Runtime Configuration Structure", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_4": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL store runtime configuration in non-volatile storage (NVS) to persist across reboots.\n\n**Rationale:** Users expect configuration changes to survive power cycles.\n\n**Acceptance Criteria:**\n\n- AC-1: Configuration SHALL be saved to NVS when modified\n- AC-2: Configuration SHALL be loaded from NVS on boot\n- AC-3: NVS write failures SHALL be logged and reported\n- AC-4: Configuration SHALL use ESP-IDF NVS API for storage", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_4", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 75, "links": ["REQ_CFG_3", "REQ_SYS_CFG_1"], "links_back": ["REQ_CFG_5", "REQ_CFG_8", "REQ_CFG_10", "SPEC_CFG_FLOW_1", "SPEC_CFG_STORAGE_1", "SPEC_CFG_IMPL_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Runtime Configuration Management", "sections": ["Runtime Configuration Management", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "storage", "nvs"], "template": null, "title": "Persistent Configuration Storage", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_5": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The configuration manager SHALL provide thread-safe API functions to read configuration parameters.\n\n**Rationale:** Multiple tasks may need concurrent access to configuration values.\n\n**Acceptance Criteria:**\n\n- AC-1: Read API SHALL return current runtime configuration values\n- AC-2: Read API SHALL be thread-safe (use mutexes if needed)\n- AC-3: Read API SHALL have minimal performance overhead\n- AC-4: Read API SHALL provide type-safe parameter access", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_5", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 97, "links": ["REQ_CFG_4"], "links_back": ["REQ_CFG_7", "REQ_CFG_11", "SPEC_CFG_FLOW_1", "SPEC_CFG_API_1", "SPEC_CFG_IMPL_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Configuration API", "sections": ["Configuration API", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "api"], "template": null, "title": "Configuration Read API", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_6": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL validate configuration parameter values to ensure they are within acceptable ranges before accepting changes.\n\n**Rationale:** Invalid configuration can cause system malfunction or safety hazards.\n\n**Acceptance Criteria:**\n\n- AC-1: Each parameter SHALL have defined minimum and maximum values\n- AC-2: Write API SHALL reject out-of-range values with error code\n- AC-3: Validation SHALL prevent invalid parameter combinations\n- AC-4: Validation errors SHALL be logged with specific parameter name", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_6", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 116, "links": ["REQ_CFG_3"], "links_back": ["SPEC_CFG_API_1", "SPEC_CFG_VALIDATION_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Configuration API", "sections": ["Configuration API", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "validation"], "template": null, "title": "Configuration Validation", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_7": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The configuration manager SHALL provide HTTP handlers for web-based configuration access and modification.\n\n**Rationale:** Users need remote configuration capability via web interface.\n\n**Acceptance Criteria:**\n\n- AC-1: HTTP GET handler SHALL return current configuration as JSON\n- AC-2: JSON format SHALL be human-readable and self-documenting\n- AC-3: Configuration SHALL include parameter metadata (units, ranges)\n- AC-4: HTTP handler SHALL be integrated with web server component", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_7", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 135, "links": ["REQ_CFG_5", "REQ_WEB_2"], "links_back": ["REQ_CFG_8", "REQ_CFG_9", "SPEC_CFG_WEB_API_1", "SPEC_CFG_UI_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Configuration API", "sections": ["Configuration API", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "web", "api"], "template": null, "title": "Configuration Web Interface", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_8": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The web interface SHALL provide capability to save configuration changes to NVS storage.\n\n**Rationale:** Users need to persist configuration changes across reboots.\n\n**Acceptance Criteria:**\n\n- AC-1: HTTP POST handler SHALL accept configuration updates as JSON\n- AC-2: Handler SHALL validate parameters before applying changes\n- AC-3: Handler SHALL save valid configuration to NVS\n- AC-4: Handler SHALL return success/error status with descriptive message\n- AC-5: Handler SHALL apply configuration immediately (no reboot required)", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_8", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 154, "links": ["REQ_CFG_7", "REQ_CFG_4"], "links_back": ["REQ_CFG_11", "SPEC_CFG_WEB_API_1", "SPEC_CFG_PREVIEW_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Configuration API", "sections": ["Configuration API", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "web", "persistence"], "template": null, "title": "Configuration Save Operation", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_CFG_9": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The web interface SHALL provide functionality to reload configuration from NVS or restore factory defaults.\n\n**Rationale:** Users may need to undo configuration changes or recover from misconfiguration.\n\n**Acceptance Criteria:**\n\n- AC-1: Reload operation SHALL re-read configuration from NVS\n- AC-2: Factory reset SHALL restore compile-time default values\n- AC-3: Factory reset SHALL clear NVS configuration storage\n- AC-4: Both operations SHALL be accessible via HTTP POST requests\n- AC-5: Operations SHALL return confirmation messages", "created_at": "", "docname": "11_requirements/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_CFG_9", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 174, "links": ["REQ_CFG_7", "REQ_CFG_1"], "links_back": ["SPEC_CFG_WEB_API_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Configuration API", "sections": ["Configuration API", "Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["config", "web", "factory-reset"], "template": null, "title": "Configuration Reset/Reload", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_NETIF_TUNNEL_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL provide a custom network interface driver that bridges ESP32's UART to the host network stack when running in QEMU emulation.\n\n**Rationale:** QEMU does not natively support ESP32 WiFi emulation. A UART tunnel enables network connectivity for testing web server and WiFi-dependent features.\n\n**Acceptance Criteria:**\n\n- AC-1: Driver SHALL register as lwIP network interface\n- AC-2: Driver SHALL use UART1 for packet transport to/from QEMU\n- AC-3: Driver SHALL be conditionally compiled only for QEMU target\n- AC-4: Driver SHALL not interfere with real hardware WiFi driver", "created_at": "", "docname": "11_requirements/netif-tunnel", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_NETIF_TUNNEL_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 15, "links": ["REQ_SYS_SIM_1"], "links_back": ["REQ_NETIF_TUNNEL_2", "REQ_NETIF_TUNNEL_3", "REQ_NETIF_TUNNEL_4", "REQ_NETIF_TUNNEL_5", "REQ_NETIF_TUNNEL_NF_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Network Interface Tunnel Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["emulation", "network", "qemu", "uart"], "template": null, "title": "QEMU UART Network Bridge", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_NETIF_TUNNEL_2": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The tunnel driver SHALL encapsulate Ethernet frames for transmission over UART with appropriate framing and error detection.\n\n**Rationale:** UART is a byte-stream transport; Ethernet frame boundaries must be preserved.\n\n**Acceptance Criteria:**\n\n- AC-1: Driver SHALL frame packets with length prefix or delimiter\n- AC-2: Driver SHALL detect and discard corrupted packets\n- AC-3: Framing SHALL support MTU-sized packets (1500 bytes)\n- AC-4: Framing overhead SHALL be minimal (<10 bytes per packet)", "created_at": "", "docname": "11_requirements/netif-tunnel", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_NETIF_TUNNEL_2", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 34, "links": ["REQ_NETIF_TUNNEL_1"], "links_back": ["REQ_NETIF_TUNNEL_NF_2"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Network Interface Tunnel Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["emulation", "protocol"], "template": null, "title": "Packet Encapsulation", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_NETIF_TUNNEL_3": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The project SHALL provide a Python script that bridges QEMU's UART to the host's TAP network interface.\n\n**Rationale:** QEMU UART output must be forwarded to host network stack for external connectivity.\n\n**Acceptance Criteria:**\n\n- AC-1: Script SHALL create TAP interface on host OS\n- AC-2: Script SHALL forward packets bidirectionally between UART and TAP\n- AC-3: Script SHALL handle QEMU's character device socket protocol\n- AC-4: Script SHALL be executable on Linux and macOS\n- AC-5: Script SHALL provide logging for debugging", "created_at": "", "docname": "11_requirements/netif-tunnel", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_NETIF_TUNNEL_3", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 53, "links": ["REQ_NETIF_TUNNEL_1"], "links_back": ["REQ_NETIF_TUNNEL_DOC_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Network Interface Tunnel Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["emulation", "tooling", "host"], "template": null, "title": "Host-Side Bridge Script", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_NETIF_TUNNEL_4": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The tunnel network interface SHALL support DHCP client operation to obtain IP address from host network.\n\n**Rationale:** Automatic IP configuration simplifies emulation setup and mirrors real WiFi behavior.\n\n**Acceptance Criteria:**\n\n- AC-1: Driver SHALL support lwIP DHCP client\n- AC-2: DHCP discovery packets SHALL be forwarded via UART tunnel\n- AC-3: Driver SHALL obtain valid IP address from host DHCP server\n- AC-4: IP configuration SHALL be logged to console", "created_at": "", "docname": "11_requirements/netif-tunnel", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_NETIF_TUNNEL_4", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 73, "links": ["REQ_NETIF_TUNNEL_1", "REQ_SYS_NET_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Network Interface Tunnel Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["emulation", "network", "dhcp"], "template": null, "title": "DHCP Client Support", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_NETIF_TUNNEL_5": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The tunnel driver SHALL be conditionally compiled only when building for QEMU target, with zero overhead on real hardware builds.\n\n**Rationale:** Real hardware uses WiFi driver; tunnel driver is emulation-specific.\n\n**Acceptance Criteria:**\n\n- AC-1: Driver SHALL be wrapped in `#ifdef CONFIG_IDF_TARGET_ESP32_QEMU`\n- AC-2: Driver SHALL NOT be linked in hardware builds\n- AC-3: Application code SHALL detect emulation mode at runtime\n- AC-4: Build system SHALL provide clear documentation for enabling QEMU mode", "created_at": "", "docname": "11_requirements/netif-tunnel", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_NETIF_TUNNEL_5", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 92, "links": ["REQ_NETIF_TUNNEL_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Network Interface Tunnel Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["emulation", "build"], "template": null, "title": "Conditional Compilation", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_NETIF_TUNNEL_DOC_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The project SHALL provide clear documentation for setting up and using QEMU emulation with network tunnel.\n\n**Rationale:** Developers need step-by-step instructions to use emulation features.\n\n**Acceptance Criteria:**\n\n- AC-1: Documentation SHALL include QEMU build/installation instructions\n- AC-2: Documentation SHALL explain TAP interface setup on Linux/macOS\n- AC-3: Documentation SHALL provide example commands for running emulation\n- AC-4: Documentation SHALL describe limitations compared to real hardware", "created_at": "", "docname": "11_requirements/netif-tunnel", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_NETIF_TUNNEL_DOC_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 153, "links": ["REQ_NETIF_TUNNEL_3", "REQ_SYS_SIM_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Documentation Requirements", "sections": ["Documentation Requirements", "Network Interface Tunnel Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["emulation", "documentation"], "template": null, "title": "Emulation Setup Documentation", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_NETIF_TUNNEL_NF_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The UART tunnel SHOULD support sufficient throughput for web interface testing (minimum 100 KB/s).\n\n**Rationale:** Web page loads and AJAX updates require reasonable bandwidth.\n\n**Acceptance Criteria:**\n\n- AC-1: Tunnel SHALL sustain at least 100 KB/s bidirectional throughput\n- AC-2: Web page loads SHALL complete within 5 seconds over tunnel\n- AC-3: UART baud rate SHALL be configurable (default 921600)", "created_at": "", "docname": "11_requirements/netif-tunnel", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_NETIF_TUNNEL_NF_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 114, "links": ["REQ_NETIF_TUNNEL_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "optional", "query": "", "rationale": "", "section_name": "Performance Requirements", "sections": ["Performance Requirements", "Network Interface Tunnel Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["emulation", "performance"], "template": null, "title": "Tunnel Throughput", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_NETIF_TUNNEL_NF_2": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The tunnel driver SHOULD handle UART packet loss gracefully without crashing.\n\n**Rationale:** QEMU's UART emulation may occasionally drop bytes under high load.\n\n**Acceptance Criteria:**\n\n- AC-1: Driver SHALL detect framing errors and discard partial packets\n- AC-2: TCP connections SHALL recover from occasional packet loss\n- AC-3: Driver SHALL log packet loss statistics for debugging", "created_at": "", "docname": "11_requirements/netif-tunnel", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_NETIF_TUNNEL_NF_2", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 132, "links": ["REQ_NETIF_TUNNEL_2"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "optional", "query": "", "rationale": "", "section_name": "Performance Requirements", "sections": ["Performance Requirements", "Network Interface Tunnel Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["emulation", "reliability"], "template": null, "title": "Packet Loss Handling", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_SYS_ARCH_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:**\nThe system SHALL implement modular component-based architecture following ESP-IDF conventions.\n\n**Rationale:**\nEnables maintainability, testability, and reusability.\n\n**Acceptance Criteria:**\n\n* AC-1: Components provide well-defined APIs\n* AC-2: Components are independently testable\n* AC-3: Main application coordinates components without tight coupling", "created_at": "", "docname": "11_requirements/system", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_SYS_ARCH_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 79, "links": [], "links_back": ["SPEC_SYS_ARCH_1", "SPEC_SYS_THREAD_1", "SPEC_SYS_MEMORY_1", "SPEC_SYS_DATAFLOW_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "System Requirements", "sections": ["System Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["architecture", "modularity"], "template": null, "title": "Component-based Architecture", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_SYS_CFG_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:**\nThe system SHALL persist configuration settings across power cycles using ESP32 NVS (Non-Volatile Storage).\n\n**Rationale:**\nMaintains user settings and system configuration permanently.\n\n**Acceptance Criteria:**\n\n* AC-1: Configuration survives device reset and power loss\n* AC-2: Factory reset capability restores default settings\n* AC-3: Configuration corruption detection and recovery", "created_at": "", "docname": "11_requirements/system", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_SYS_CFG_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 61, "links": [], "links_back": ["REQ_CFG_1", "REQ_CFG_3", "REQ_CFG_4", "SPEC_SYS_CONFIG_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "System Requirements", "sections": ["System Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["storage", "nvs", "configuration"], "template": null, "title": "Non-volatile Configuration Storage", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_SYS_HW_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:**\nThe system SHALL operate on ESP32 microcontroller with 4MB flash memory.\n\n**Rationale:**\nESP32 provides WiFi connectivity, sufficient processing power, and adequate flash memory for IoT applications.\n\n**Acceptance Criteria:**\n\n* AC-1: System boots successfully on ESP32 WROOM-32 or compatible modules\n* AC-2: Flash usage does not exceed 90% of available 4MB\n* AC-3: System operates within ESP32 memory constraints (DRAM/IRAM)", "created_at": "", "docname": "11_requirements/system", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_SYS_HW_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 6, "links": [], "links_back": ["SPEC_SYS_BUILD_1", "SPEC_SYS_FLASH_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "System Requirements", "sections": ["System Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["hardware", "platform"], "template": null, "title": "ESP32 Hardware Platform", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_SYS_NET_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:**\nThe system SHALL provide WiFi connectivity in both Access Point (AP) and Station (STA) modes.\n\n**Rationale:**\nEnables web interface access and network configuration flexibility.\n\n**Acceptance Criteria:**\n\n* AC-1: System creates WiFi Access Point for initial configuration\n* AC-2: System connects to existing WiFi networks as station\n* AC-3: Automatic fallback to AP mode if STA connection fails", "created_at": "", "docname": "11_requirements/system", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_SYS_NET_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 24, "links": [], "links_back": ["REQ_NETIF_TUNNEL_4", "REQ_SYS_WEB_1", "REQ_WEB_3"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "System Requirements", "sections": ["System Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["network", "wifi"], "template": null, "title": "WiFi Connectivity", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_SYS_PERF_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:**\nThe system SHALL manage memory efficiently within ESP32 constraints.\n\n**Rationale:**\nPrevents memory leaks and ensures stable operation.\n\n**Acceptance Criteria:**\n\n* AC-1: Heap usage monitored and bounded\n* AC-2: No memory leaks during normal operation\n* AC-3: Stack overflow protection for all tasks\n* AC-4: Dynamic allocation minimized in time-critical paths", "created_at": "", "docname": "11_requirements/system", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_SYS_PERF_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 116, "links": [], "links_back": ["SPEC_SYS_PERF_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "System Requirements", "sections": ["System Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["performance", "memory"], "template": null, "title": "Memory Management", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_SYS_REL_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:**\nThe system SHALL handle errors gracefully and attempt recovery where possible.\n\n**Rationale:**\nEnsures system reliability and user experience.\n\n**Acceptance Criteria:**\n\n* AC-1: Component timeouts handled without system crash\n* AC-2: Network connection failures trigger automatic retry\n* AC-3: System logs errors for diagnostics\n* AC-4: Watchdog timer prevents system hang", "created_at": "", "docname": "11_requirements/system", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_SYS_REL_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 97, "links": [], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "System Requirements", "sections": ["System Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["reliability", "error-handling"], "template": null, "title": "Error Handling and Recovery", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_SYS_SIM_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:**\nThe system SHALL support build-time selectable emulator mode (QEMU) that replaces hardware-specific modules with simulator implementations while preserving public APIs.\n\n**Rationale:**\nEnables development and testing without physical hardware, improves reproducibility and CI test coverage.\n\n**Acceptance Criteria:**\n\n* AC-1: Kconfig option ``CONFIG_TARGET_EMULATOR`` enables emulator builds\n* AC-2: Simulator implementations selected by CMake without requiring code changes\n* AC-3: Simulator components implement complete public API of hardware counterparts\n* AC-4: Emulator build runnable under QEMU with console output\n* AC-5: Documentation provides build/run verification steps", "created_at": "", "docname": "11_requirements/system", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_SYS_SIM_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 135, "links": [], "links_back": ["REQ_NETIF_TUNNEL_1", "REQ_NETIF_TUNNEL_DOC_1", "SPEC_SYS_NETIF_1", "SPEC_SYS_QEMU_1", "SPEC_SYS_DEV_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "System Requirements", "sections": ["System Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["emulator", "qemu", "testing"], "template": null, "title": "Emulator Support", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_SYS_WEB_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:**\nThe system SHALL provide web interface for configuration and monitoring.\n\n**Rationale:**\nUser-friendly interface for system setup and operation without firmware recompilation.\n\n**Acceptance Criteria:**\n\n* AC-1: Web interface accessible via HTTP\n* AC-2: Configuration changes applied without firmware recompilation\n* AC-3: Real-time monitoring of system status", "created_at": "", "docname": "11_requirements/system", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_SYS_WEB_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 42, "links": ["REQ_SYS_NET_1"], "links_back": ["REQ_WEB_1", "REQ_WEB_2", "REQ_WEB_4", "REQ_WEB_5", "SPEC_SYS_WEB_1", "SPEC_SYS_CERT_1", "SPEC_SYS_WIFI_1", "SPEC_SYS_HTTP_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "System Requirements", "sections": ["System Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "configuration"], "template": null, "title": "Web-based Configuration", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_WEB_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL provide a web page that displays current system status with real-time updates for user monitoring.\n\n**Rationale:** Users need to monitor the device's operation remotely via web interface without requiring physical access.\n\n**Acceptance Criteria:**\n\n- AC-1: Main page SHALL display current system status\n- AC-2: Status values SHALL update with reasonable responsiveness\n- AC-3: Page SHALL indicate system state (normal, error, warning)\n- AC-4: Page SHALL be accessible via web browser on mobile and desktop devices", "created_at": "", "docname": "11_requirements/web-server", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_WEB_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 15, "links": ["REQ_SYS_WEB_1"], "links_back": ["REQ_WEB_NF_1", "REQ_WEB_NF_2"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Web Server Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "ui", "monitoring"], "template": null, "title": "Real-time Status Display", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_WEB_2": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL provide a web page for configuring device parameters as defined in the configuration management requirements.\n\n**Rationale:** Users need to adjust device settings remotely without firmware recompilation or physical access.\n\n**Acceptance Criteria:**\n\n- AC-1: Settings page SHALL display all user-configurable parameters\n- AC-2: Settings page SHALL validate user input ranges before submission\n- AC-3: Settings page SHALL provide immediate feedback on invalid inputs\n- AC-4: Settings page SHALL confirm successful parameter updates\n- AC-5: Settings page SHALL handle configuration save errors gracefully", "created_at": "", "docname": "11_requirements/web-server", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_WEB_2", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 34, "links": ["REQ_SYS_WEB_1", "REQ_CFG_3"], "links_back": ["REQ_CFG_7", "REQ_WEB_NF_1", "REQ_WEB_NF_2", "SPEC_CFG_UI_1"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Web Server Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "ui", "configuration"], "template": null, "title": "Configuration Interface", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_WEB_3": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL provide a captive portal WiFi setup page for initial network configuration.\n\n**Rationale:** Users need an intuitive method to configure WiFi credentials without serial console access or hardcoded credentials.\n\n**Acceptance Criteria:**\n\n- AC-1: Device SHALL start in AP mode when WiFi credentials are not configured\n- AC-2: WiFi setup page SHALL display available WiFi networks (SSID scan)\n- AC-3: WiFi setup page SHALL accept SSID and password input\n- AC-4: WiFi setup page SHALL validate credentials by attempting connection\n- AC-5: WiFi setup page SHALL provide feedback on connection success/failure\n- AC-6: Device SHALL switch to STA mode after successful WiFi configuration", "created_at": "", "docname": "11_requirements/web-server", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_WEB_3", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 54, "links": ["REQ_SYS_NET_1"], "links_back": ["REQ_WEB_NF_2"], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Web Server Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "wifi", "network"], "template": null, "title": "WiFi Setup Interface", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_WEB_4": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system SHALL provide navigation between multiple web pages (status, settings, WiFi setup).\n\n**Rationale:** Users need to access different functionality areas without memorizing URLs.\n\n**Acceptance Criteria:**\n\n- AC-1: All pages SHALL include navigation menu or links\n- AC-2: Navigation SHALL clearly indicate current page\n- AC-3: Navigation SHALL be accessible on mobile devices\n- AC-4: Page URLs SHALL be intuitive and RESTful (e.g., `/`, `/settings`, `/wifi`)", "created_at": "", "docname": "11_requirements/web-server", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_WEB_4", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 75, "links": ["REQ_SYS_WEB_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Web Server Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "ui", "navigation"], "template": null, "title": "Web Interface Navigation", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_WEB_5": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The web server SHALL handle multiple simultaneous HTTP connections without blocking.\n\n**Rationale:** Multiple users or browser tabs may access the device simultaneously.\n\n**Acceptance Criteria:**\n\n- AC-1: Web server SHALL support at least 4 concurrent connections\n- AC-2: Server SHALL respond to new connections within 2 seconds under load\n- AC-3: Server SHALL not crash or hang under concurrent access\n- AC-4: Connection handling SHALL not interfere with real-time system operation", "created_at": "", "docname": "11_requirements/web-server", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_WEB_5", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 94, "links": ["REQ_SYS_WEB_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "section_name": "Functional Requirements", "sections": ["Functional Requirements", "Web Server Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "performance"], "template": null, "title": "HTTP Server Concurrency", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_WEB_NF_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Web pages SHOULD load and render within 3 seconds on typical mobile/desktop browsers.\n\n**Rationale:** Responsive UI improves user experience and reduces perceived latency.\n\n**Acceptance Criteria:**\n\n- AC-1: Initial page load SHALL complete within 3 seconds (excluding network latency)\n- AC-2: Navigation between pages SHALL feel instantaneous (<500ms)\n- AC-3: AJAX updates SHALL not cause page flickering or layout shifts", "created_at": "", "docname": "11_requirements/web-server", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_WEB_NF_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 116, "links": ["REQ_WEB_1", "REQ_WEB_2"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "optional", "query": "", "rationale": "", "section_name": "Non-Functional Requirements", "sections": ["Non-Functional Requirements", "Web Server Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "performance", "ux"], "template": null, "title": "Web UI Responsiveness", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "REQ_WEB_NF_2": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Web interface SHOULD be optimized for mobile devices with responsive design.\n\n**Rationale:** Many users will access the device from smartphones in the field.\n\n**Acceptance Criteria:**\n\n- AC-1: UI SHALL be usable on screens as small as 320px width\n- AC-2: Touch targets SHALL be at least 44x44px for mobile usability\n- AC-3: Text SHALL be readable without zooming on mobile devices", "created_at": "", "docname": "11_requirements/web-server", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "REQ_WEB_NF_2", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 134, "links": ["REQ_WEB_1", "REQ_WEB_2", "REQ_WEB_3"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "optional", "query": "", "rationale": "", "section_name": "Non-Functional Requirements", "sections": ["Non-Functional Requirements", "Web Server Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "ui", "mobile"], "template": null, "title": "Mobile-First Design", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_API_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Public API provides thread-safe access to configuration with validation.\n\n**Core API Functions:**\n\n.. code-block:: c\n\n   // Lifecycle management\n   esp_err_t config_init(void);\n   esp_err_t config_load_from_nvs(void);\n   esp_err_t config_save_to_nvs(void);\n   esp_err_t config_factory_reset(void);\n\n   // Individual getters (thread-safe, no blocking)\n   uint16_t config_get_measurement_interval_ms(void);\n   uint8_t config_get_led_count(void);\n   uint8_t config_get_led_brightness(void);\n\n   // Individual setters (with validation)\n   esp_err_t config_set_measurement_interval(uint16_t interval_ms);\n   esp_err_t config_set_led_count(uint8_t count);\n   esp_err_t config_set_led_brightness(uint8_t brightness);\n\n   // Bulk operations\n   esp_err_t config_get_all(system_config_t* config);\n   esp_err_t config_set_all(const system_config_t* config);\n   bool config_validate_all(const system_config_t* config,\n                            char* error_msg, size_t msg_len);\n\n**Thread Safety:** All functions protected by FreeRTOS mutex with configurable timeout.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_API_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 148, "links": ["REQ_CFG_5", "REQ_CFG_6"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "API Design", "sections": ["API Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["api", "interface"], "template": null, "title": "Configuration API Interface", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_ARCH_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The configuration system implements a three-layer architecture for separation of concerns.\n\n**Architecture Layers:**\n\n.. code-block:: text\n\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502           Application Layer             \u2502\n   \u2502  (main.c, components, web_server.c)     \u2502\n   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n   \u2502         Configuration API Layer         \u2502\n   \u2502    (config.h, config.c - Public API)    \u2502\n   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n   \u2502           Storage Layer                 \u2502\n   \u2502     (NVS abstraction, validation)       \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n**Layer Responsibilities:**\n\n- **Application Layer**: Consumes configuration values through standardized API\n- **Configuration API Layer**: Provides thread-safe access, validation, and caching\n- **Storage Layer**: Handles NVS operations, persistence, and error recovery\n\n**Design Rationale:** Layered architecture enables independent testing, simplifies maintenance, and provides clear separation between business logic and storage concerns.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_ARCH_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 18, "links": ["REQ_CFG_1", "REQ_CFG_2"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Architecture Design", "sections": ["Architecture Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["architecture", "config"], "template": null, "title": "Layered Configuration Architecture", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_ERROR_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Configuration system handles NVS failures gracefully with automatic recovery.\n\n**Error Recovery Strategy:**\n\n1. **Corruption Detection**: CRC32 mismatch triggers recovery\n2. **Magic Number Check**: Invalid magic triggers factory reset\n3. **Version Migration**: Unsupported version triggers controlled migration or reset\n4. **Fallback to Defaults**: Any read failure results in default configuration\n5. **Logging**: All errors logged with ESP_LOGE for debugging\n\n**Boot Behavior:** System always boots successfully even with corrupted NVS.\n\n**User Notification:** Web interface displays warning banner if defaults used.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_ERROR_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 305, "links": ["REQ_CFG_10"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Error Handling Design", "sections": ["Error Handling Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["error-handling", "nvs"], "template": null, "title": "NVS Error Recovery Strategy", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_FLOW_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Configuration data flows through the system with caching and validation.\n\n**Data Flow Stages:**\n\n.. code-block:: text\n\n   Startup:  NVS \u2192 config_load() \u2192 Runtime Cache \u2192 Application\n   Runtime:  Application \u2192 config_get() \u2192 Runtime Cache\n   Update:   Web Interface \u2192 config_save() \u2192 Validation \u2192 NVS \u2192 Runtime Cache\n   Factory:  config_factory_reset() \u2192 Defaults \u2192 NVS \u2192 Runtime Cache\n\n**Key Design Decisions:**\n\n1. **Runtime Cache**: Configuration cached in RAM for fast access (<10 CPU cycles)\n2. **Atomic Updates**: Configuration changes applied atomically to prevent partial updates\n3. **Validation Gate**: All changes validated before persistence to prevent invalid state\n4. **Error Recovery**: Automatic fallback to defaults on NVS corruption", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_FLOW_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 50, "links": ["REQ_CFG_3", "REQ_CFG_4", "REQ_CFG_5"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Architecture Design", "sections": ["Architecture Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["architecture", "dataflow"], "template": null, "title": "Configuration Data Flow", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_IMPL_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Configuration system implemented in phases to manage complexity.\n\n**Phase 1: Core Configuration (Milestone 1)**\n\n- Implement config.h centralized header (REQ_CFG_1, REQ_CFG_2)\n- Define system_config_t structure (REQ_CFG_3)\n- Implement NVS storage layout (REQ_CFG_4)\n- Create basic getter/setter API (REQ_CFG_5)\n\n**Phase 2: Web Interface (Milestone 2)**\n\n- Implement REST API endpoints (REQ_CFG_7)\n- Create /settings HTML page (REQ_CFG_8)\n- Add preview functionality (REQ_CFG_9)\n\n**Phase 3: Advanced Features (Milestone 3)**\n\n- Add parameter validation (REQ_CFG_6)\n- Implement error recovery (REQ_CFG_10)\n- Add comprehensive logging (REQ_CFG_11)\n\n**Testing Strategy:** Each phase includes unit tests and integration tests before proceeding.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_IMPL_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 355, "links": ["REQ_CFG_1", "REQ_CFG_2", "REQ_CFG_3", "REQ_CFG_4", "REQ_CFG_5"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Implementation Strategy", "sections": ["Implementation Strategy", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["implementation", "strategy"], "template": null, "title": "Phased Implementation Approach", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_LOGGING_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** All configuration changes logged for debugging and audit trail.\n\n**Logging Format:**\n\n.. code-block:: text\n\n   [CONFIG] Parameter changed: led_brightness 128 -> 255 (user: web)\n   [CONFIG] Configuration saved to NVS (save_count: 42)\n   [CONFIG] Factory reset performed (reason: user request)\n\n**Log Levels:**\n\n- ESP_LOGI: Normal configuration changes\n- ESP_LOGW: Validation failures, preview timeouts\n- ESP_LOGE: NVS errors, corruption detected\n- ESP_LOGD: Detailed debug info (disabled in production)\n\n**Performance:** Logging does not block configuration operations.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_LOGGING_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 326, "links": ["REQ_CFG_11"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Error Handling Design", "sections": ["Error Handling Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["logging", "debugging"], "template": null, "title": "Configuration Logging", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_PREVIEW_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Web interface supports temporary configuration preview with auto-revert.\n\n**Preview Workflow:**\n\n1. User adjusts sliders on /settings page\n2. JavaScript POSTs to /api/config/preview\n3. ESP32 applies changes temporarily (30-second timeout)\n4. User sees real-time visual feedback (e.g., LED brightness)\n5. User clicks \"Apply\" to persist, or timeout auto-reverts\n\n**Safety Feature:** Preview timeout prevents bricking device if user navigates away.\n\n**Implementation:** Separate preview_config buffer, swapped with active config on apply.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_PREVIEW_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 247, "links": ["REQ_CFG_8"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Web Interface Design", "sections": ["Web Interface Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "ui", "preview"], "template": null, "title": "Real-time Configuration Preview", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_RUNTIME_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Runtime configuration structure mirrors NVS layout but uses application-friendly types.\n\n**Structure Definition:**\n\n.. code-block:: c\n\n   typedef struct {\n       // Application uses native types for convenience\n       float distance_min_cm;        // Converted from mm storage\n       float distance_max_cm;        // Converted from mm storage\n       uint16_t measurement_interval_ms;\n       uint32_t sensor_timeout_ms;\n       float smoothing_alpha;        // Converted from fixed-point\n\n       uint8_t led_count;\n       uint8_t led_brightness;\n\n       // ... other component configurations ...\n\n   } system_config_t;\n\n**Type Conversion:** NVS uses integers/fixed-point for efficiency; runtime uses floats for convenience.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_RUNTIME_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 115, "links": ["REQ_CFG_3"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Data Structure Design", "sections": ["Data Structure Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["data-structure", "runtime"], "template": null, "title": "Runtime Configuration Structure", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_STORAGE_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Configuration stored in NVS as packed 64-byte structure with metadata and checksums.\n\n**Storage Layout:**\n\n.. code-block:: c\n\n   typedef struct {\n       // Metadata (16 bytes)\n       uint32_t magic_number;        // 0xCFG12345 - corruption detection\n       uint32_t config_version;      // Schema version for migration\n       uint32_t crc32_checksum;      // Data integrity verification\n       uint32_t save_count;          // Change tracking\n\n       // Component configurations (~48 bytes)\n       // ... component-specific fields ...\n\n       // Reserved for expansion\n       uint8_t reserved[N];          // Future-proofing\n\n   } __attribute__((packed)) config_nvs_storage_t;\n\n**Storage Optimization:**\n\n- Fixed Size: 64-byte structure for efficient NVS operations\n- Alignment: Packed structure to minimize flash usage\n- Reserved Fields: Expansion capability without breaking compatibility\n- Checksum: CRC32 for corruption detection and recovery\n\n**Migration Strategy:** Version field enables schema migration when structure changes.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_STORAGE_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 78, "links": ["REQ_CFG_3", "REQ_CFG_4"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Data Structure Design", "sections": ["Data Structure Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["data-structure", "storage"], "template": null, "title": "NVS Storage Format", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_UI_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** HTML5 settings page with form validation and real-time updates.\n\n**Page Structure:**\n\n.. code-block:: text\n\n   <form id=\"config-form\">\n     <fieldset>\n       <legend>Component Settings</legend>\n       <input type=\"range\" id=\"param1\" min=\"X\" max=\"Y\" step=\"Z\">\n       <span class=\"value-display\">Current: <span id=\"param1-value\"></span></span>\n     </fieldset>\n\n     <div class=\"config-actions\">\n       <button type=\"button\" id=\"preview-btn\">Preview</button>\n       <button type=\"button\" id=\"apply-btn\">Apply &amp; Save</button>\n       <button type=\"button\" id=\"reset-btn\">Factory Reset</button>\n     </div>\n   </form>\n\n**JavaScript Behavior:**\n\n- Range inputs trigger live preview (debounced 500ms)\n- Value displays update in real-time\n- Factory reset requires confirmation dialog\n- Success/error messages displayed via toast notifications", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_UI_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 268, "links": ["REQ_CFG_7", "REQ_WEB_2"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Web Interface Design", "sections": ["Web Interface Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "ui", "html"], "template": null, "title": "Web Settings Page", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_VALIDATION_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** All configuration parameters validated against defined ranges before acceptance.\n\n**Validation Rules:**\n\n- distance_min: 5.0 to 100.0 cm\n- distance_max: 20.0 to 400.0 cm, must be > distance_min\n- measurement_interval: 50 to 1000 ms\n- sensor_timeout: 100 to 5000 ms\n- led_count: 1 to 60\n- led_brightness: 10 to 255\n\n**Error Handling:** Invalid values return ESP_ERR_INVALID_ARG with descriptive error message.\n\n**Validation Timing:** Performed before NVS write to prevent persisting invalid state.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_VALIDATION_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 185, "links": ["REQ_CFG_6"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "API Design", "sections": ["API Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["validation", "api"], "template": null, "title": "Parameter Validation Rules", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_CFG_WEB_API_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** RESTful HTTP API for configuration management via web interface.\n\n**API Endpoints:**\n\n.. code-block:: text\n\n   GET  /api/config           -> Current configuration (JSON)\n   POST /api/config           -> Update configuration (JSON)\n   POST /api/config/preview   -> Temporary configuration preview\n   POST /api/config/apply     -> Apply previewed configuration\n   POST /api/config/reset     -> Factory reset\n   GET  /api/config/export    -> Export configuration (JSON download)\n   POST /api/config/import    -> Import configuration (JSON upload)\n\n**JSON Format:**\n\n.. code-block:: json\n\n   {\n     \"version\": \"1.0\",\n     \"timestamp\": \"2025-07-24T12:34:56Z\",\n     \"config\": {\n       \"measurement_interval_ms\": 100,\n       \"led_count\": 30,\n       \"led_brightness\": 128\n     }\n   }\n\n**Authentication:** Currently open; future versions may add basic auth or API tokens.", "created_at": "", "docname": "12_design/config-manager", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_CFG_WEB_API_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 210, "links": ["REQ_CFG_7", "REQ_CFG_8", "REQ_CFG_9"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Web Interface Design", "sections": ["Web Interface Design", "Configuration Manager Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "api", "rest"], "template": null, "title": "Configuration REST API", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_ARCH_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The system follows ESP-IDF component-based architecture with clear separation of concerns.\n\n**System Structure:**\n\n.. code-block:: text\n\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n   \u2502                    Main Application (main.c)                \u2502\n   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n   \u2502                   Example Components                        \u2502\n   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n   \u2502 config_manager\u2502  web_server  \u2502 cert_handler \u2502 netif_tunnel  \u2502\n   \u2502  - NVS mgmt   \u2502  - HTTP API  \u2502  - SSL certs \u2502  - QEMU net   \u2502\n   \u2502  - Validation \u2502  - WiFi mgr  \u2502  - Auto-gen  \u2502  - UART tun   \u2502\n   \u2502  - Runtime    \u2502  - Captive   \u2502  - Embedding \u2502  - Bridge     \u2502\n   \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n   \u2502              ESP-IDF Hardware Abstraction Layer             \u2502\n   \u2502   NVS | HTTP | WiFi | GPIO | FreeRTOS | Netif | TCP/IP     \u2502\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n**Component Organization:**\n\n- **main/**: Application entry point and user-customizable code\n- **main/components/**: Reusable components following ESP-IDF conventions\n- **ESP-IDF HAL**: Hardware abstraction provided by ESP-IDF framework\n\n**Design Philosophy:** Template provides example components, users add their own application logic.", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_ARCH_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 18, "links": ["REQ_SYS_ARCH_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Overview", "sections": ["Overview", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["architecture", "system"], "template": null, "title": "ESP32 Component-Based Architecture", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_BUILD_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Project uses ESP-IDF CMake build system with component registration.\n\n**Build Structure:**\n\n.. code-block:: cmake\n\n   # Top-level CMakeLists.txt\n   cmake_minimum_required(VERSION 3.16)\n   include($ENV{IDF_PATH}/tools/cmake/project.cmake)\n   project(esp32-template)\n\n   # Component CMakeLists.txt\n   idf_component_register(\n       SRCS \"component.c\"\n       INCLUDE_DIRS \".\"\n       REQUIRES esp_http_server nvs_flash\n   )\n\n**Configuration Files:**\n\n- ``sdkconfig``: ESP-IDF configuration (flash size, partition table)\n- ``CMakeLists.txt``: Build system definition\n- ``main/Kconfig.projbuild``: Custom menuconfig options\n\n**Build Commands:**\n\n.. code-block:: bash\n\n   idf.py build              # Build firmware\n   idf.py flash              # Flash to hardware\n   idf.py monitor            # Serial monitor\n   idf.py flash monitor      # Flash and monitor", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_BUILD_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 362, "links": ["REQ_SYS_HW_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Build and Configuration", "sections": ["Build and Configuration", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["build", "cmake"], "template": null, "title": "ESP-IDF Build System Integration", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_CERT_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Certificate management component for HTTPS (work in progress).\n\n**Component Purpose:**\n\n- Automate SSL certificate generation\n- Embed certificates in firmware build\n- Enable HTTPS for web server component\n\n**Key Features:**\n\n- Build-time certificate generation\n- OpenSSL and Python fallback support\n- ESP-IDF EMBED_FILES integration\n- 25-year certificate validity\n\n**Location**: ``main/components/cert_handler/``\n\n**Status**: \ud83d\udea7 **WIP** - HTTPS not yet working in QEMU", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_CERT_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 110, "links": ["REQ_SYS_WEB_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Component Specifications", "sections": ["Component Specifications", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "draft", "style": null, "tags": ["component", "security"], "template": null, "title": "Certificate Handler Component", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_CONFIG_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Example configuration management component demonstrating NVS usage patterns.\n\n**Component Purpose:**\n\n- Demonstrates persistent storage with ESP-IDF NVS\n- Shows runtime configuration structure patterns\n- Provides validation and error recovery examples\n- Template for user-specific configuration needs\n\n**Key Features:**\n\n- NVS-backed persistent storage\n- Runtime configuration caching\n- Parameter validation framework\n- Factory reset capability\n\n**Location**: ``main/components/config_manager/``\n\n**Status**: \u2705 Complete example implementation", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_CONFIG_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 56, "links": ["REQ_SYS_CFG_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Component Specifications", "sections": ["Component Specifications", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["component", "config"], "template": null, "title": "Configuration Manager Component", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_DATAFLOW_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Components communicate through well-defined APIs and FreeRTOS primitives.\n\n**Communication Patterns:**\n\n.. code-block:: text\n\n   User Application (main.c)\n        \u2195 (API calls)\n   Component Layer\n        \u2195 (FreeRTOS queues/events)\n   ESP-IDF HAL\n        \u2195 (Hardware registers)\n   Physical Hardware\n\n**Synchronization Primitives:**\n\n- **Mutexes**: Protect shared configuration state\n- **Queues**: Producer-consumer data flow\n- **Event Groups**: Task coordination and signaling\n- **Semaphores**: Resource counting and blocking\n\n**Template Pattern:** Components expose clean APIs; internal synchronization hidden", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_DATAFLOW_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 225, "links": ["REQ_SYS_ARCH_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Data Flow Design", "sections": ["Data Flow Design", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["dataflow", "communication"], "template": null, "title": "Component Communication Pattern", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_DEV_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Template optimized for GitHub Codespaces with pre-configured environment.\n\n**Development Environment:**\n\n- **DevContainer**: Ubuntu 24.04 with ESP-IDF 5.4.1 pre-installed\n- **QEMU**: Integrated for emulation without hardware\n- **VS Code**: Extensions for C/C++, Python, ESP-IDF\n- **Pre-commit Hooks**: Automated quality checks\n\n**Workflow:**\n\n1. Fork/clone template repository\n2. Open in GitHub Codespaces (or local devcontainer)\n3. Customize main.c and add components\n4. Build and test in QEMU\n5. Flash to physical hardware when ready\n\n**Benefits**: Zero local setup, consistent environment, works anywhere", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_DEV_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 459, "links": ["REQ_SYS_SIM_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Development Workflow", "sections": ["Development Workflow", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["development", "codespaces"], "template": null, "title": "GitHub Codespaces Development", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_FLASH_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Template configured for 4MB flash modules with single app partition.\n\n**Flash Configuration:**\n\n- **Flash Size**: 4MB (CONFIG_ESPTOOLPY_FLASHSIZE_4MB=y)\n- **Partition Table**: Single App Large (maximum app space)\n- **Free Space**: ~41% available for application growth\n- **HTTPS Ready**: Sufficient space for SSL/TLS certificates\n\n**Partition Layout:**\n\n.. code-block:: text\n\n   Name        Type  Offset   Size\n   nvs         data  0x9000   24K   (configuration storage)\n   phy_init    data  0xf000   4K    (RF calibration)\n   factory     app   0x10000  ~3.8MB (application firmware)\n\n**Verification**: Use ``idf.py size`` to check memory usage", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_FLASH_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 402, "links": ["REQ_SYS_HW_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Build and Configuration", "sections": ["Build and Configuration", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["flash", "memory"], "template": null, "title": "Flash Memory Configuration", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_HTTP_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** HTTP server provides web interface and REST API.\n\n**Server Features:**\n\n- Static file serving from embedded filesystem\n- RESTful API endpoints for configuration\n- Captive portal detection and redirect\n- CORS headers for development\n\n**URL Structure:**\n\n.. code-block:: text\n\n   /                   \u2192 index.html (main page)\n   /settings           \u2192 settings.html (configuration)\n   /wifi-setup         \u2192 wifi-setup.html (captive portal)\n   /api/config         \u2192 REST API (GET/POST)\n   /api/wifi           \u2192 WiFi management API\n\n**Status**: \u2705 HTTP working, \ud83d\udea7 HTTPS in progress", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_HTTP_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 291, "links": ["REQ_SYS_WEB_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Network Architecture", "sections": ["Network Architecture", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["network", "http", "web"], "template": null, "title": "HTTP Server Architecture", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_MEMORY_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Memory managed with FreeRTOS heap and ESP-IDF capabilities.\n\n**Memory Allocation:**\n\n- **Static**: Component structures allocated at compile time\n- **Dynamic**: Runtime allocations use heap_caps_malloc()\n- **DMA**: Use MALLOC_CAP_DMA for peripheral buffers\n- **IRAM**: Use IRAM_ATTR only for interrupt handlers\n\n**Memory Constraints:**\n\n- 4MB flash configured (typical ESP32 module)\n- ~41% free flash after base system\n- Monitor heap with esp_get_free_heap_size()\n- Stack overflow protection enabled\n\n**Template Guidance:** Users monitor memory usage for their specific application", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_MEMORY_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 197, "links": ["REQ_SYS_ARCH_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Threading and Task Model", "sections": ["Threading and Task Model", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["memory", "performance"], "template": null, "title": "Memory Management Strategy", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_NETIF_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** QEMU-specific network bridge component for emulator support.\n\n**Component Purpose:**\n\n- Enable network access in QEMU emulation\n- Bridge UART to host network stack\n- Support development without physical hardware\n\n**Key Features:**\n\n- UART-based network tunneling\n- Python bridge script for host side\n- Transparent TCP/IP pass-through\n- QEMU-only compilation (conditional)\n\n**Location**: ``main/components/netif_uart_tunnel/``\n\n**Status**: \u2705 Complete QEMU network support", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_NETIF_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 136, "links": ["REQ_SYS_SIM_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Component Specifications", "sections": ["Component Specifications", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["component", "qemu", "network"], "template": null, "title": "Network Tunnel Component", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_PERF_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Template targets reasonable performance for IoT applications.\n\n**Performance Targets:**\n\n- **Boot Time**: < 3 seconds to WiFi connection\n- **Web Response**: < 500ms for configuration API calls\n- **Memory Usage**: < 100KB application heap usage\n- **Task Latency**: < 100ms for application tasks\n\n**Monitoring:**\n\n- Use ESP_LOGI() for timing measurements\n- Monitor heap with esp_get_free_heap_size()\n- Check stack watermarks with uxTaskGetStackHighWaterMark()\n\n**Note**: Users optimize for their specific application requirements", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_PERF_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 432, "links": ["REQ_SYS_PERF_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Performance Targets", "sections": ["Performance Targets", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["performance", "requirements"], "template": null, "title": "System Performance Requirements", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_QEMU_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Template supports QEMU emulation for hardware-less development.\n\n**QEMU Components:**\n\n1. **ESP32 QEMU Emulator**: Hardware emulation (CPU, peripherals)\n2. **UART Tunnel Driver**: Network bridge (netif_uart_tunnel)\n3. **Python Bridge Script**: Host-side network proxy\n4. **HTTP Proxy**: Web access from host browser\n\n**Network Architecture:**\n\n.. code-block:: text\n\n   Host Browser \u2192 HTTP Proxy (tools/http_proxy.py)\n                       \u2193 (port 8080)\n   QEMU ESP32 (192.168.5.2) \u2192 UART1 Tunnel\n                       \u2193 (serial_tun_bridge.py)\n   Host Network Stack \u2192 Internet\n\n**Usage Workflow:**\n\n1. Start QEMU with network script: ``./tools/run-qemu-network.sh``\n2. ESP32 boots and initializes network tunnel\n3. Access web interface via HTTP proxy\n4. Test application without physical hardware\n\n**Limitations**: HTTPS not working in QEMU (HTTP works fine)\n\n**Status**: \u2705 Complete QEMU support with network", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_QEMU_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 322, "links": ["REQ_SYS_SIM_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "QEMU Emulation Support", "sections": ["QEMU Emulation Support", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["qemu", "emulation"], "template": null, "title": "QEMU Emulation Architecture", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_THREAD_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Application uses FreeRTOS tasks for concurrent operations.\n\n**Task Structure:**\n\n.. code-block:: text\n\n   Main Task (Priority 1, Core 0)\n   \u2514\u2500\u2500 Application-defined tasks (users add their own)\n\n   WiFi/Network Tasks (Priority 2+, Core 1)\n   \u251c\u2500\u2500 WiFi Management (connection handling)\n   \u251c\u2500\u2500 HTTP Server (request processing)\n   \u2514\u2500\u2500 TCP/IP Stack (ESP-IDF managed)\n\n   Core 1: WiFi/Network + ESP-IDF System Tasks (reserved)\n\n**Design Guidelines:**\n\n- Use Core 0 for application tasks\n- Core 1 reserved for WiFi/network stack\n- Prioritize tasks appropriately (0-25)\n- Monitor stack usage with uxTaskGetStackHighWaterMark()\n\n**Template Approach:** Users define their own tasks in main.c", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_THREAD_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 165, "links": ["REQ_SYS_ARCH_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Threading and Task Model", "sections": ["Threading and Task Model", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["threading", "rtos"], "template": null, "title": "FreeRTOS Task Architecture", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_WEB_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Example HTTP server component with captive portal and WiFi management.\n\n**Component Purpose:**\n\n- Demonstrates ESP-IDF HTTP server usage\n- Shows captive portal implementation pattern\n- Provides WiFi management examples (AP/STA modes)\n- Template for web-based device configuration\n\n**Key Features:**\n\n- HTTP server with static file serving\n- Captive portal for WiFi setup\n- WiFi credential storage in NVS\n- Automatic AP fallback on connection failure\n\n**Location**: ``main/components/web_server/``\n\n**Status**: \u2705 Complete HTTP implementation, \ud83d\udea7 HTTPS pending", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_WEB_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 83, "links": ["REQ_SYS_WEB_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Component Specifications", "sections": ["Component Specifications", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["component", "web"], "template": null, "title": "Web Server Component", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}, "SPEC_SYS_WIFI_1": {"acceptance_criteria": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** WiFi management with automatic reconnection and AP fallback.\n\n**WiFi Operation Modes:**\n\n1. **Station (STA) Mode**: Connect to existing WiFi network\n2. **Access Point (AP) Mode**: Create configuration network\n3. **Fallback Logic**: Auto-switch to AP if STA fails\n\n**Connection Flow:**\n\n.. code-block:: text\n\n   Boot \u2192 Load NVS Credentials \u2192 STA Connection Attempt\n                                        \u2193 (success)\n                                   STA Connected\n                                        \u2193 (failure after timeout)\n                                   AP Mode + Captive Portal\n\n**Credential Management:**\n\n- WiFi SSID/password stored in NVS\n- Factory reset clears credentials\n- Web interface provides credential update\n\n**Status**: \u2705 Complete with NVS integration", "created_at": "", "docname": "12_design/system-architecture", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "id": "SPEC_SYS_WIFI_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 258, "links": ["REQ_SYS_WEB_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "section_name": "Network Architecture", "sections": ["Network Architecture", "System Architecture Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["network", "wifi"], "template": null, "title": "WiFi Manager Design", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}}, "needs_amount": 61, "needs_schema": {"$schema": "http://json-schema.org/draft-07/schema#", "properties": {"acceptance_criteria": {"default": "", "description": "Added by needs_extra_options config", "field_type": "extra", "type": "string"}, "arch": {"additionalProperties": {"type": "string"}, "default": {}, "description": "Mapping of uml key to uml content.", "field_type": "core", "type": "object"}, "avatar": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "closed_at": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "completion": {"default": null, "description": "Added for needgantt functionality", "field_type": "extra", "type": "integer"}, "constraints": {"default": [], "description": "List of constraint names, which are defined for this need.", "field_type": "core", "items": {"type": "string"}, "type": "array"}, "constraints_error": {"default": null, "description": "An error message set if any constraint failed, and `error_message` field is set in config.", "field_type": "core", "type": ["string", "null"]}, "constraints_passed": {"default": true, "description": "True if all constraints passed, False if any failed, None if not yet checked.", "field_type": "core", "type": ["boolean", "null"]}, "constraints_results": {"additionalProperties": {"type": "object"}, "default": {}, "description": "Mapping of constraint name, to check name, to result, None if not yet checked.", "field_type": "core", "type": ["object", "null"]}, "content": {"default": "", "description": "The main content of the need.", "field_type": "core", "type": "string"}, "created_at": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "docname": {"default": null, "description": "Name of the document where the need is defined (None if external).", "field_type": "core", "type": ["string", "null"]}, "doctype": {"default": ".rst", "description": "The markup type of the content, denoted by the suffix of the source file, e.g. '.rst'.", "field_type": "core", "type": "string"}, "duration": {"default": null, "description": "Added for needgantt functionality", "field_type": "extra", "type": "integer"}, "external_css": {"default": "", "description": "CSS class name, added to the external reference.", "field_type": "core", "type": "string"}, "external_url": {"default": null, "description": "URL of the need, if it is an external need.", "field_type": "core", "type": ["string", "null"]}, "has_dead_links": {"default": false, "description": "True if any links reference need ids that are not found in the need list.", "field_type": "core", "type": "boolean"}, "has_forbidden_dead_links": {"default": false, "description": "True if any links reference need ids that are not found in the need list, and the link type does not allow dead links.", "field_type": "core", "type": "boolean"}, "id": {"description": "ID of the data.", "field_type": "core", "type": "string"}, "id_prefix": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "is_external": {"default": false, "description": "If true, no node is created and need is referencing external url.", "field_type": "core", "type": "boolean"}, "is_import": {"default": false, "description": "If true, the need was derived from an import.", "field_type": "core", "type": "boolean"}, "is_modified": {"default": false, "description": "Whether the need was modified by needextend.", "field_type": "core", "type": "boolean"}, "jinja_content": {"default": false, "description": "Whether the content was pre-processed by jinja.", "field_type": "core", "type": "boolean"}, "layout": {"default": null, "description": "Key of the layout, which is used to render the need.", "field_type": "core", "type": ["string", "null"]}, "lineno": {"default": null, "description": "Line number where the need is defined (None if external).", "field_type": "core", "type": ["integer", "null"]}, "links": {"default": [], "description": "Link field", "field_type": "links", "items": {"type": "string"}, "type": "array"}, "links_back": {"default": [], "description": "Backlink field", "field_type": "backlinks", "items": {"type": "string"}, "type": "array"}, "max_amount": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "max_content_lines": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "modifications": {"default": 0, "description": "Number of modifications by needextend.", "field_type": "core", "type": "integer"}, "params": {"default": "", "description": "Added by service open-needs", "field_type": "extra", "type": "string"}, "parent_need": {"default": null, "description": "Simply the first parent id.", "field_type": "core", "type": ["string", "null"]}, "parent_needs": {"default": [], "description": "Link field", "field_type": "links", "items": {"type": "string"}, "type": "array"}, "parent_needs_back": {"default": [], "description": "Backlink field", "field_type": "backlinks", "items": {"type": "string"}, "type": "array"}, "parts": {"additionalProperties": {"type": "object"}, "default": {}, "description": "Mapping of parts, a.k.a. sub-needs, IDs to data that overrides the need's data", "field_type": "core", "type": "object"}, "post_content": {"default": null, "description": "Additional content after the need.", "field_type": "core", "type": ["string", "null"]}, "post_template": {"default": null, "description": "The template key, if the post_content was created from a jinja template.", "field_type": "core", "type": ["string", "null"]}, "pre_content": {"default": null, "description": "Additional content before the need.", "field_type": "core", "type": ["string", "null"]}, "pre_template": {"default": null, "description": "The template key, if the pre_content was created from a jinja template.", "field_type": "core", "type": ["string", "null"]}, "prefix": {"default": "", "description": "Added by service open-needs", "field_type": "extra", "type": "string"}, "priority": {"default": "", "description": "Added by needs_extra_options config", "field_type": "extra", "type": "string"}, "query": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "rationale": {"default": "", "description": "Added by needs_extra_options config", "field_type": "extra", "type": "string"}, "section_name": {"default": null, "description": "Simply the first section.", "field_type": "core", "type": ["string", "null"]}, "sections": {"default": [], "description": "Sections of the need.", "field_type": "core", "items": {"type": "string"}, "type": "array"}, "service": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "signature": {"default": null, "description": "Derived from a docutils desc_name node.", "field_type": "core", "type": ["string", "null"]}, "specific": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "status": {"default": null, "description": "Status of the need.", "field_type": "core", "type": ["string", "null"]}, "style": {"default": null, "description": "Comma-separated list of CSS classes (all appended by `needs_style_`).", "field_type": "core", "type": ["string", "null"]}, "tags": {"default": [], "description": "List of tags.", "field_type": "core", "items": {"type": "string"}, "type": "array"}, "template": {"default": null, "description": "The template key, if the content was created from a jinja template.", "field_type": "core", "type": ["string", "null"]}, "title": {"description": "Title of the need.", "field_type": "core", "type": "string"}, "type": {"default": "", "description": "Type of the need.", "field_type": "core", "type": "string"}, "type_name": {"default": "", "description": "Name of the type.", "field_type": "core", "type": "string"}, "updated_at": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "url": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}, "url_postfix": {"default": "", "description": "Added by service open-needs", "field_type": "extra", "type": "string"}, "user": {"default": "", "description": "Added by service github-issues", "field_type": "extra", "type": "string"}}, "type": "object"}}}}